<div class="w-full">
<%= render "notice"%>

<% if @counter > 5 %>
  <h1><i>You've visited this page <%= pluralize(@counter, 'time') %> without adding an item to cart</i></h1>
<%end%>

<h1 class="font-bold text-xl mb-6 pb-2 border-b-2">
  Your Pragmatic Catalog
</h1>

<ul>
  <% cache @products do %>
    <% @products.each do |product| %>
      <% cache product do %>
        <li class='flex mb-6'>
          <%= image_tag(product.image_url,
            class: 'object-contain w-40 h-48 shadow mr-6') %>

          <div>
            <h2 class="font-bold text-lg mb-3"><%= product.title %></h2>

            <p>
              <%= sanitize(product.description) %>
            </p>

            <div class="mt-3">
              <%= number_to_currency(product.price, format: "%n %u", unit: "MKD") %>

              <%= button_to "Add to cart", line_items_path(product_id: product), form_class: "inline", class: "ml-4 rounded-lg py-1 px-2 text-white bg-green-600" %>
            </div>
          </div>
        </li>
      <% end %>
    <% end %>
  <% end %>
</ul>
</div>
